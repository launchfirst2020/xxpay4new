{"version":3,"sources":["webpack:///src/modules/jd/paySelect/index.vue","webpack:///./src/modules/jd/paySelect/index.vue?08f6","webpack:///./src/modules/jd/paySelect/index.vue"],"names":["paySelect","components","Keyboard","data","htmlProportion","htmlWidth","htmlheight","yenSymbol","isAllowModifyAmount","keyboardOption","show","clickShowDom","value","payToken","storeId","operatorId","tradeOrderId","merchantName","showMask","remark","headSculpture","__webpack_require__","mounted","this","judge_shuru","created","_this","document","documentElement","clientWidth","body","clientHeight","mchId","$route","query","alert","payAmount","Object","vueAPI","then","res","mchName","catch","error","methods","showKeyboard","$refs","money_shuru","payment","_this2","toFixed","payParam","JSON","parse","window","location","href","PAY_URL","err","toPayFunc","_this3","$nextTick","jd_paySelect","render","_vm","_h","$createElement","_c","_self","staticStyle","background","staticClass","_v","domProps","textContent","_s","attrs","src","alt","height","ref","on","click","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.89a94136debcda1d2413.js","sourcesContent":["<template>\n\t<div style=\"background: rgba(242, 242, 242, 1)\">\n\n\t\t<!-- 内容 -->\n\t\t<div class=\"lf-store-name\" >\n      <div class=\"lf-content-payPanel\">\n        <div>\n          <div class=\"one\">\n            <span class=\"\">付款给&nbsp;<span v-text=\"this.merchantName\"></span></span>\n            <div><img :src=\"headSculpture\" class=\"headSculpture\" alt=\"\"></div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n     <div class=\"bottom\" style=\"height: 37rem;\">\n       <!-- 金额 -->\n       <div class=\"jiner\">\n         <div class=\"text\">金额</div>\n         <div class=\"money\">\n           <span class=\"money_fuhao\">￥</span>\n           <span v-if=\"isAllowModifyAmount\" class=\"text-lg pay-price-input\" v-text=\"keyboardOption.value\" @click=\"showKeyboard\"\n             ref=\"keyboard\"></span>\n           <span v-else class=\"text-lg pay-price-input\" v-text=\"keyboardOption.value\"></span>\n           <Keyboard :keyboardOption=\"keyboardOption\" :toPayFunc=\"toPayFunc\"></Keyboard>\n         </div>\n       </div>\n       <div class=\"fukuan\" v-if=\"keyboardOption.show==false\">\n         <div  class=\"fukuan_text\" @click=\"payment\"><span class=\"zhifu-text1\">付款{{keyboardOption.value}}元</span></div>\n       </div>\n     </div>\n     <!-- 1 -->\n\n\t</div>\n</template>\n\n<script>\n\timport {getMchInfo, getJDPay} from '../../../api/vueAPI.js'\n  import Keyboard from '../../../components/keyboard'\n\n\texport default{\n    components: {Keyboard},\n    data() {\n\t\t\treturn{\n\n\t\t\t\thtmlProportion: '',\t\t//屏幕长宽比例\n\t\t\t\thtmlWidth: '',\t\t//屏幕宽\n\t\t\t\thtmlheight: '',\t\t//屏幕高\n\t\t\t\tyenSymbol: '\\u00A5',\t//金钱符号\n\n        isAllowModifyAmount : true, //是否允许修改金额\n\n        //自定义软键盘 数据对象\n        keyboardOption: {\n          show: false,   //是否显示\n          clickShowDom: \"\",   //仅当前为该对象时显示，否则会自动隐藏， 一般为显示金额的dom\n          value: \"\"   //金额\n        },\n\n        payToken: \"\", //token\n        storeId: \"\",  //门店ID\n        operatorId: \"\",  //操作员ID\n        tradeOrderId: \"\", //tradeOrderId\n\n\t\t\t\tmerchantName: ' -- ',\n        showMask: false,\n        remark: '' ,// 备注\n        headSculpture: require(\"../../../assets/MoRenTouXiang.png\")\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t  this.judge_shuru();\n\t\t  },\n\t\tcreated() {\n\n\t\t\tthis.htmlWidth = document.documentElement.clientWidth || document.body.clientWidth;\n\t\t\tthis.htmlheight = document.documentElement.clientHeight || document.body.clientHeight;\n\t\t\tthis.htmlProportion = this.htmlWidth / 750 ;\n\n\n      //2. 获取url参数\n\n      //获取mchId信息(必填)\n      let mchId = this.$route.query.mchId;\n      if(!mchId) return alert('参数有误');\n      this.mchId = mchId;\n\n      //店铺ID（非必填）\n      let storeId = this.$route.query.storeId;\n      if(storeId){\n        this.storeId = storeId\n      }\n\n      //操作员ID（非必填）\n      let operatorId = this.$route.query.operatorId;\n      if(operatorId){\n        this.operatorId = operatorId;\n      }\n      //金额（非必填） 单位： 分\n      let payAmount = this.$route.query.payAmount;\n      if(payAmount){ //默认金额， 不支持修改\n        this.keyboardOption.value = payAmount / 100;\n      }else{\n        this.isAllowModifyAmount = true;  //支持修改\n      }\n\n      //tradeOrderId\n      let tradeOrderId = this.$route.query.tradeOrderId;\n      if(tradeOrderId){\n        this.tradeOrderId = tradeOrderId;\n      }\n\n      //获取payToken信息(必填)\n      let payToken = this.$route.query.payToken;\n      if(!payToken) return alert('参数有误');\n      this.payToken = payToken;\n\n      //异步获取商户名称\n      getMchInfo(this.payToken, this.mchId, this.storeId, this.operatorId).then(res => {\n        this.merchantName = res.data.mchName;\n      }).catch(error => {});\n\n\t\t},\n\t\tmethods:{\n      showKeyboard(){\n        this.keyboardOption.clickShowDom = this.$refs['keyboard'];  //$ref仅页面加载完成后有效， 放置需要显示的input\n        this.keyboardOption.show = true;\n      },\n\t  // 判断是否能输入而自动弹出键盘\n\t  judge_shuru() {\n\t    if (this.isAllowModifyAmount) {\n\t      this.showKeyboard();\n\t      this.money_shuru = true;\n\t    }\n\t  },\n\n\t\t\t/* 付款 */\n\t\t\tpayment() {\n\n        this.showMask = true; //开启遮罩层\n        let that = this;\n        //获取支付宝支付参数\n\n        if(!this.keyboardOption.value){\n          this.showMask = false;\n          return alert('请输入正确的金额！');\n        }\n\n        let payAmount = (this.keyboardOption.value * 100 ).toFixed(0); //支付金额：元 -> 分\n        if(payAmount <= 0){\n          this.showMask = false;\n          return alert('请输入正确的金额！');\n        }\n\n        getJDPay(payAmount, this.storeId, this.operatorId, this.mchId, this.tradeOrderId, this.payToken).then(res => {\n\n          let payParam = JSON.parse(res.data.payParam);\n\n          window.location.href = payParam.PAY_URL;\n\n        }).catch(err => {\n          this.showMask = false; //关闭遮罩层\n        });\n\t\t\t},\n\n      //点击 【确认】 回调事件\n      toPayFunc() {\n\n        this.$nextTick(() => {\n          this.payment();\n        });\n      }\n\n\t\t}\n\t}\n</script>\n\n<style scoped>\n@import url(\"../../wx/paySelect/index.css\");\n.fukuan{\n  box-shadow: 0 2px 8px #108ee9;\n  background: #108ee9;\n  -webkit-box-shadow: 0 2px 8px #108ee9;\n  margin-top: 110%;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/modules/jd/paySelect/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"background\":\"rgba(242, 242, 242, 1)\"}},[_c('div',{staticClass:\"lf-store-name\"},[_c('div',{staticClass:\"lf-content-payPanel\"},[_c('div',[_c('div',{staticClass:\"one\"},[_c('span',{},[_vm._v(\"付款给 \"),_c('span',{domProps:{\"textContent\":_vm._s(this.merchantName)}})]),_vm._v(\" \"),_c('div',[_c('img',{staticClass:\"headSculpture\",attrs:{\"src\":_vm.headSculpture,\"alt\":\"\"}})])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"bottom\",staticStyle:{\"height\":\"37rem\"}},[_c('div',{staticClass:\"jiner\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"金额\")]),_vm._v(\" \"),_c('div',{staticClass:\"money\"},[_c('span',{staticClass:\"money_fuhao\"},[_vm._v(\"￥\")]),_vm._v(\" \"),(_vm.isAllowModifyAmount)?_c('span',{ref:\"keyboard\",staticClass:\"text-lg pay-price-input\",domProps:{\"textContent\":_vm._s(_vm.keyboardOption.value)},on:{\"click\":_vm.showKeyboard}}):_c('span',{staticClass:\"text-lg pay-price-input\",domProps:{\"textContent\":_vm._s(_vm.keyboardOption.value)}}),_vm._v(\" \"),_c('Keyboard',{attrs:{\"keyboardOption\":_vm.keyboardOption,\"toPayFunc\":_vm.toPayFunc}})],1)]),_vm._v(\" \"),(_vm.keyboardOption.show==false)?_c('div',{staticClass:\"fukuan\"},[_c('div',{staticClass:\"fukuan_text\",on:{\"click\":_vm.payment}},[_c('span',{staticClass:\"zhifu-text1\"},[_vm._v(\"付款\"+_vm._s(_vm.keyboardOption.value)+\"元\")])])]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-28cce715\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/jd/paySelect/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-28cce715\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-28cce715\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-28cce715\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/jd/paySelect/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}