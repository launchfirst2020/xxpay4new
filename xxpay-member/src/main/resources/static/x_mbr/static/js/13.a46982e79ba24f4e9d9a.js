webpackJsonp([13],{SxeU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("CJJO"),n=i("s0MJ").dateUtils,a={data:function(){return{htmlProportion:"",htmlWidth:"",htmlheight:"",page:1,limit:20,member:{},background:"#FF9000",color:"#FFFFFF",historyList:[],refreshing:!1,loading:!1,loadedAll:!1,isGetMore:!0}},created:function(){this.htmlWidth=document.documentElement.clientWidth||document.body.clientWidth,this.htmlheight=document.documentElement.clientHeight||document.body.clientHeight,this.htmlProportion=this.htmlWidth/750,this.getList(),this.getMemberDetails()},methods:{getMemberDetails:function(){var t=this;Object(s.d)().then(function(e){t.member=e.data,t.member.balance=e.data.balance/100+"元"}).catch(function(t){console.log(t)})},getList:function(){var t=this;Object(s.f)(t.page,t.limit).then(function(e){t.loading=!1;var i=t.setColumns(e.data);t.historyList=t.refreshing?i:t.historyList.concat(i),i.length<t.limit?(t.isGetMore=!1,t.loadedAll=!0):t.loadedAll=!1,t.refreshing=!1}).catch(function(e){t.refreshing=!1,console.log(e)})},setColumns:function(t){var e=[];return t.forEach(function(t){e.push({balanceHistoryId:t.balanceHistoryId,memberNo:t.memberNo,changeAmount:t.changeAmount/100,bizOrderId:null==t.bizOrderId?"":t.bizOrderId,payType:1==t.payType?"支付宝":2==t.payType?"微信":3==t.payType?"储值卡":4==t.payType?"导入":"",bizType:1==t.bizType?"充值":2==t.bizType?"消费":3==t.bizType?"退款":4==t.bizType?"导入":5==t.bizType?"赠送":"",createTime:n.format2Datetime(t.createTime)})}),e},refresh:function(){this.refreshing=!0,this.isGetMore=!0,this.$refs.container.scrollTop=0,this.page=1,this.getList(),this.getMemberDetails()},load:function(){this.loading=!0,this.page=Math.floor(this.list.length/this.limit)+1,this.isGetMore?this.getList():this.loadedAll=!0},getDetail:function(t){this.$router.push({path:"/user/balanceHistory/detail",query:{balanceHistoryId:t.balanceHistoryId}})},jump:function(){this.$router.push({path:"/member/recharge"})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white",style:{height:t.htmlheight+"px"}},[i("div",{staticClass:"user-body-between",style:{height:160*t.htmlProportion+"px",background:t.background,color:t.color}},[i("span",{staticClass:"user-body-top",staticStyle:{width:"60%"}},[t._v("余额 : "+t._s(t.member.balance))]),t._v(" "),i("mu-button",{staticClass:"user-right",attrs:{small:"",round:"",color:"#ffb74d"},on:{click:function(e){return t.jump()}}},[t._v("前往充值>")])],1),t._v(" "),i("mu-container",{ref:"container"},[i("mu-load-more",{attrs:{refreshing:t.refreshing,loading:t.loading,"loaded-all":t.loadedAll},on:{refresh:t.refresh,load:t.load}},[i("mu-list",[t._l(t.historyList,function(e,s){return[i("div",{key:s,staticClass:"uni-list-cell",on:{click:function(i){return t.getDetail(e)}}},[i("div",{staticClass:"uni-list-cell-navigate uni-navigate-right uni-media-list"},[i("div",{staticClass:"list-body-column"},[i("div",{staticClass:"uni-media-list-text-top"},[i("span",[t._v("金额: "+t._s(e.changeAmount))]),t._v(" "),i("span",{staticClass:"text-B text-small text-orange"},[t._v(t._s(e.bizType))])]),t._v(" "),i("div",{staticClass:"uni-media-list-text-bottom"},[i("span",[t._v(t._s(e.payType))]),t._v(" "),i("span",[t._v("交易时间:"+t._s(e.createTime))])])])])])]})],2)],1)],1)],1)},staticRenderFns:[]};var r=i("C7Lr")(a,o,!1,function(t){i("tchL")},null,null);e.default=r.exports},tchL:function(t,e){}});