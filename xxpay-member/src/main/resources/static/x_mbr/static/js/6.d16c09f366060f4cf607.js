webpackJsonp([6],{rwEz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("CJJO"),r=i("so+s"),a=i.n(r),n=i("s0MJ"),c={data:function(){return{htmlProportion:"",htmlWidth:"",htmlheight:"",memberId:"",openId:"",mchId:"",phone:"",code:"",isErr:!1,errTxt:"手机号输入有误",showErr:"",memberCard:{},memberName:"",mchSrc:"",cardSrcBox:"",cardSrc:"",isGetCode:!0,showTime:60,bgImgUrl:a.a,returnURL:""}},created:function(){this.htmlWidth=document.documentElement.clientWidth||document.body.clientWidth,this.htmlheight=document.documentElement.clientHeight||document.body.clientHeight,this.htmlProportion=this.htmlWidth/750,this.openId=Object(n.getUrlKey)("openId"),this.mchId=Object(n.getUrlKey)("mchId"),this.returnURL=Object(n.getUrlKey)("returnURL"),this.getMchMemberCardDetail()},watch:{isErr:function(t,e){var i=this;!0===t&&setTimeout(function(){i.isErr=!1},1500)},cardSrc:function(t,e){this.cardSrc&&(this.cardSrcBox={backgroundImage:"url("+this.cardSrc+")"})}},methods:{getMchMemberCardDetail:function(){var t=this;Object(s.i)(this.mchId).then(function(e){t.memberCard=e.data,t.mchSrc=void 0==t.memberCard.mchPhotoId?"":t.getPic(t.memberCard.mchPhotoId),t.memberCard.backgroundPictureId?t.cardSrc=t.getPic(t.memberCard.backgroundPictureId):t.cardSrc=t.bgImgUrl}).catch(function(t){console.log(t)})},jumpMemberServiceAgreement:function(){this.$router.push({path:"/member/memberServiceAgreement",query:{}})},jumpmemberCards:function(){this.$router.push({path:"/member/memberCard/detail",query:{mchId:this.mchId}})},getCode:function(){var t=this;if(!this.phone)return this.errTxt="请输入手机号",void(this.isErr=!0);this.phone.match(/^1[3456789]\d{9}$/)?webVerificationCode(this.memberId,this.phone,this.mchId).then(function(e){t.isGetCode=!1;var i=setInterval(function(){t.showTime<=0&&(clearInterval(i),t.isGetCode=!0,t.showTime=60),t.showTime--},1e3);console.log(e)}).catch(function(t){console.log(t)}):(this.errTxt="手机号输入有误",this.isErr=!0)},getMemberCard:function(){var t=this;return this.memberName?this.phone?this.phone.match(/^1[3456789]\d{9}$/)?void Object(s.w)(this.phone,this.memberName,this.openId,this.mchId).then(function(e){if(0==e.code){if(t.returnURL)return void(window.location.href=t.returnURL);window.localStorage.setItem(s.y,e.data.access_token),t.$router.push({path:"/member",query:{}})}}).catch(function(t){console.log(t)}):(this.errTxt="手机号输入有误",void(this.isErr=!0)):void 0:(this.errTxt="会员名不能为空",void(this.isErr=!0))},getPic:function(t){return s.c+"/fms/upload/resource/"+t}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white"},[s("div",{staticClass:"lf-mat lf-mat-f",style:{height:40*t.htmlProportion+"px"}}),t._v(" "),s("div",{staticClass:"lf-content",style:{height:t.htmlheight+"px"}},[s("div",{staticClass:"lf-content-card"},[s("div",{staticClass:"lf-card-box",style:{height:850*t.htmlProportion+"px"}},[s("div",{staticClass:"lf-card",style:[{height:350*t.htmlProportion+"px"},t.cardSrcBox]},[s("div",[s("div",{staticClass:"lf-card-head"},[s("div",{staticClass:"lf-img-head"},[t.mchSrc?s("img",{attrs:{src:t.mchSrc}}):s("img",{attrs:{src:i("Q2SH")}})]),t._v(" "),s("div",{staticClass:"lf-head-text"},[s("span",{staticClass:"text-sm text-white"},[t._v(t._s(t.memberCard.mchName))]),t._v(" "),s("span",[s("span",{staticClass:"text-yellow iconfont lf-icon-vip"}),t._v(" "),s("span",{staticClass:"text-ssm text-white"},[t._v(t._s(t.memberCard.memberCardName))])])])]),t._v(" "),s("div",[s("span",{staticClass:"text-sm lf-card-text"},[t._v("会员卡号")]),t._v(" "),s("div",{staticClass:"margin-top-10"},[s("span",{staticClass:"text-white text-weight text-letter"},[t._v(t._s(t.memberCard.id?t.memberCard.id:"88** **** ****"))])])])])]),t._v(" "),s("div",{staticClass:"lf-card-details text-sm",on:{click:t.jumpmemberCards}},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"lf-iphone-checking",style:{height:200*t.htmlProportion+"px"}},[s("div",{staticClass:"display-flex"},[s("span",{staticClass:"margin-right-10"},[t._v("会员名")]),t._v(" "),s("div",{staticClass:"display-flex-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.memberName,expression:"memberName"}],staticClass:"phone-input",staticStyle:{"font-size":"0.875rem",padding:"0.3125rem 0.625rem",width:"100%"},attrs:{type:"text",placeholder:"请输入您的会员名"},domProps:{value:t.memberName},on:{input:function(e){e.target.composing||(t.memberName=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"display-flex"},[s("span",{staticClass:"margin-right-10"},[t._v("手机号")]),t._v(" "),s("div",{staticClass:"display-flex-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"phone-input",staticStyle:{"font-size":"0.875rem",padding:"0.3125rem 0.625rem",width:"100%"},attrs:{type:"number",placeholder:"请输入您的手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"lf-card-btn",class:{showHighCode:t.code},style:{height:90*t.htmlProportion+"px"},on:{click:t.getMemberCard}},[s("span",{staticClass:"text-lg text-white",staticStyle:{"font-size":"1.3rem"}},[t._v("立即领取")])])]),t._v(" "),s("div",[s("span",{staticClass:"text-blue text-sm",on:{click:t.jumpMemberServiceAgreement}},[t._v("登录即同意《会员服务协议》")])])])]),t._v(" "),s("div",{staticClass:"lf-mat lf-mat-f",style:{height:40*t.htmlProportion+"px"}}),t._v(" "),s("transition",{attrs:{name:"tip"}},[t.isErr?s("div",{staticClass:"lf-err-tip"},[t._v(t._s(t.errTxt))]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"iconfont lf-icon-xingxing text-blue margin-right-10"}),this._v(" "),e("span",[this._v("权益")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-grey"},[e("span",[this._v("查看会员卡详情")]),this._v(" "),e("span",{staticClass:"iconfont lf-icon-right"})])}]};var m=i("C7Lr")(c,o,!1,function(t){i("sYel")},null,null);e.default=m.exports},sYel:function(t,e){},"so+s":function(t,e,i){t.exports=i.p+"static/img/bg_card.e242211.png"}});