webpackJsonp([19],{GDWT:function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=n("CJJO"),e=n("s0MJ"),s={data:function(){return{active:0,noCoupon:!1,htmlProportion:"",htmlWidth:"",htmlheight:"",couponList:[],couponRefreshing:!1,couponLoading:!1,couponLoadedAll:!1,page:1,limit:10,status:0}},created:function(){this.htmlWidth=document.documentElement.clientWidth||document.body.clientWidth,this.htmlheight=document.documentElement.clientHeight||document.body.clientHeight,this.htmlProportion=this.htmlWidth/750,this.couponLoadedAll=!0,this.getMchCouponList()},methods:{couponRefresh:function(){this.couponRefreshing=!0,this.couponLoadedAll=!1,this.$refs.container.scrollTop=0,this.page=1,this.status=0,this.getMchCouponList()},couponLoad:function(){this.couponLoading=!0,this.page=Math.floor(this.couponList.length/this.limit)+1,this.couponLoadedAll?this.couponLoadedAll=!0:this.getMchCouponList()},getMchCouponList:function(){var t=this;Object(i.n)(t.page,t.limit,t.status).then(function(o){var n=t.setCoupons(o.data);n.length<=0?(t.noCoupon=!0,t.active=-1):t.noCoupon=!1,t.couponList=t.couponRefreshing?n:t.couponList.concat(n),n.length<t.limit?t.couponLoadedAll=!0:t.couponLoadedAll=!1,t.couponLoading=!1,t.couponRefreshing=!1}).catch(function(o){t.couponRefreshing=!1,console.log(o)})},setCoupons:function(t){var o=[];return t.forEach(function(t){t.validateEnd="使用期限："+e.dateUtils.format2Datetime(t.validateEnd),o.push({couponId:t.couponId,couponNo:t.couponNo,payAmountLimit:"满"+t.payAmountLimit/100+"减"+t.couponAmount/100,couponAmount:"￥"+t.couponAmount/100,validateEnd:t.validateEnd,totalNum:"剩余"+(t.totalNum-t.receiveNum)+"张"})}),o},change:function(t){0==t?(this.page=1,this.couponRefreshing=!0,this.couponLoadedAll=!1,this.status=0,this.getMchCouponList()):1==t?(this.page=1,this.couponRefreshing=!0,this.couponLoadedAll=!1,this.status=1,this.getMchCouponList()):2==t&&(this.page=1,this.couponRefreshing=!0,this.couponLoadedAll=!1,this.status=2,this.getMchCouponList())},jump:function(t){this.$router.push({path:"/user/coupon/detail",query:{couponNo:t.couponNo}})}}},a={render:function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"bg-white"},[n("div",{style:{height:t.htmlheight+"px"}},[n("div",{staticClass:"tabBox"},[n("mu-tabs",{attrs:{value:t.active,inverse:"",color:"black","indicator-color":"blue","full-width":""},on:{"update:value":function(o){t.active=o},change:t.change}},[n("mu-tab",[t._v("未使用")]),t._v(" "),n("mu-tab",[t._v("已使用")]),t._v(" "),n("mu-tab",[t._v("已过期")])],1)],1),t._v(" "),t.noCoupon?n("div",{staticClass:"tab-content margin-top-20",staticStyle:{"text-align":"center"}},[n("span",[t._v("暂无卡券")])]):t._e(),t._v(" "),0===t.active?n("div",{staticClass:"tab-content"},[n("mu-container",{ref:"container"},[n("mu-load-more",{attrs:{refreshing:t.couponRefreshing,loading:t.couponLoading,"loaded-all":t.couponLoadedAll},on:{refresh:t.couponRefresh,load:t.couponLoad}},[n("mu-list",[t._l(t.couponList,function(o,i){return[n("div",{key:i,staticClass:"coupon-item"},[n("div",{staticClass:"coupon-detail"},[n("div",{staticClass:"coupon-money"},[n("span",{staticClass:"text-B text-mid-big"},[t._v(t._s(o.couponAmount))]),t._v(" "),n("span",{staticClass:"text-black text-B"},[t._v("  "+t._s(o.payAmountLimit))])]),t._v(" "),n("div",{staticClass:"coupon-endTime"},[t._v(t._s(o.validateEnd))])]),t._v(" "),n("div",{staticClass:"coupon-get",staticStyle:{"margin-top":"0"}},[n("mu-button",{staticStyle:{transform:"scale(0.8)","font-size":"15px"},attrs:{small:"",round:"",color:"#FF9000"},on:{click:function(n){return t.jump(o)}}},[t._v("去使用")])],1)])]})],2)],1)],1)],1):t._e(),t._v(" "),1===t.active?n("div",{staticClass:"tab-content"},[n("mu-container",{ref:"container"},[n("mu-load-more",{attrs:{refreshing:t.couponRefreshing,loading:t.couponLoading,"loaded-all":t.couponLoadedAll},on:{refresh:t.couponRefresh,load:t.couponLoad}},[n("mu-list",[t._l(t.couponList,function(o,i){return[n("div",{key:i,staticClass:"coupon-item"},[n("div",{staticClass:"coupon-detail"},[n("div",{staticClass:"coupon-money"},[n("span",{staticClass:"text-B text-mid-big"},[t._v(t._s(o.couponAmount))]),t._v(" "),n("span",{staticClass:"text-black text-B"},[t._v("  "+t._s(o.payAmountLimit))])]),t._v(" "),n("div",{staticClass:"coupon-endTime"},[t._v(t._s(o.validateEnd))])]),t._v(" "),n("div",{staticClass:"coupon-get",staticStyle:{"margin-top":"0"}},[n("div",{staticClass:"coupon-used"},[t._v("已使用")])])])]})],2)],1)],1)],1):t._e(),t._v(" "),2===t.active?n("div",{staticClass:"tab-content"},[n("mu-container",{ref:"container"},[n("mu-load-more",{attrs:{refreshing:t.couponRefreshing,loading:t.couponLoading,"loaded-all":t.couponLoadedAll},on:{refresh:t.couponRefresh,load:t.couponLoad}},[n("mu-list",[t._l(t.couponList,function(o,i){return[n("div",{key:i,staticClass:"coupon-item"},[n("div",{staticClass:"coupon-detail"},[n("div",{staticClass:"coupon-money"},[n("span",{staticClass:"text-B text-mid-big"},[t._v(t._s(o.couponAmount))]),t._v(" "),n("span",{staticClass:"text-black text-B"},[t._v("  "+t._s(o.payAmountLimit))])]),t._v(" "),n("div",{staticClass:"coupon-endTime"},[t._v(t._s(o.validateEnd))])]),t._v(" "),n("div",{staticClass:"coupon-get",staticStyle:{"margin-top":"0"}},[n("div",{staticClass:"coupon-used"},[t._v("已过期")])])])]})],2)],1)],1)],1):t._e()])])},staticRenderFns:[]};var c=n("C7Lr")(s,a,!1,function(t){n("wraC")},null,null);o.default=c.exports},wraC:function(t,o){}});